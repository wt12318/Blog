---
title: 【R语言编程指南】元编程
author: wutao
date: '2021-01-14'
slug: index.zh-cn
categories:
  - R
tags:
  - notes
image : "77_cover_m.jpg"
---

Last compiled on `r format(Sys.time(), '%d %B, %Y')`

```{r setup, include=FALSE}
knitr::opts_chunk$set(collapse = TRUE,comment=">>")
```

本章主要学习3个内容：

- 函数式编程
  - 在函数内部定义的函数→闭包
  - 与其他函数组合使用的函数→高阶函数
- 基于语言的计算
- 非标准计算

## 函数式编程
### 闭包
闭包(closure)就是在函数内部定义的函数,下面创建一个简单的闭包：
```{r ex1}
addn <- function(y){
  function(x){
    x+y
  }
}

```
上面的函数在其内部创建一个函数，所以其返回值是一个闭包；这个addn就相当于一个“函数工厂”，通过提供不同的参数就可以创建不同的函数：
```{r ex2}
add1 <- addn(1)
add2 <- addn(2)

add1
##当函数不在当前工作环境，输出该函数时会显示其所在的环境

add1(10)
add2(10)

```

我们可以通过在[R内部机制](http://localhost:4321/p/r-inter/)中提到的ennironment()来查看这两个闭包的封闭环境：
```{r ex3}
environment(add1)$y
environment(add2)$y

```

